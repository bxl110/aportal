!function(D){"use strict";D.HSCore.components.HSGMap={_baseConfig:{zoom:14,scrollwheel:!1,infoWindowTemplate:function(e,t,o,a,l){return'<img class="rounded-circle" src="'+e+'" alt="'+t+'"><div class="p-2"><strong class="d-block mb-1">'+o+'</strong><p class="mb-1"><i class="fa fa-map-marker mr-2"></i>'+a+'</p><h2 class="h6 mb-0">'+l+"</h2></div>"}},pageCollection:D(),init:function(e,t){if(this.collection=e&&D(e).length?D(e):D(),D(e).length)return this.config=t&&D.isPlainObject(t)?D.extend({},this._baseConfig,t):this._baseConfig,this.config.itemSelector=e,this.initGMap(),this.pageCollection},initGMap:function(){var _=this.config,x=this.pageCollection;this.collection.each(function(e,t){var a,o=D(t),l=o.attr("id"),n=o.data("type"),s=o.data("lat"),i=o.data("lng"),r=o.data("zoom"),c=o.data("title"),d=JSON.parse(t.getAttribute("data-styles")),g=[],p=Boolean(o.data("polygon")),m=JSON.parse(t.getAttribute("data-polygon-cords")),u=JSON.parse(t.getAttribute("data-polygon-styles")),f=Boolean(o.data("polylines")),h=JSON.parse(t.getAttribute("data-polylines-cords")),y=JSON.parse(t.getAttribute("data-polylines-styles")),w=Boolean(o.data("routes")),k=JSON.parse(t.getAttribute("data-routes-cords")),M=JSON.parse(t.getAttribute("data-routes-styles")),v=Boolean(o.data("geolocation")),C=Boolean(o.data("geocoding")),b=o.data("cords-target"),O=Boolean(o.data("pin")),z=o.data("pin-icon"),S=Boolean(o.data("multiple-markers")),T=JSON.parse(t.getAttribute("data-markers-locations"));if("satellite"==n)(a=new google.maps.Map(document.getElementById(l),{zoom:r||_.zoom,scrollwheel:_.scrollwheel})).setCenter({lat:s,lng:i}),a.setMapTypeId(google.maps.MapTypeId.SATELLITE);else if("terrain"==n)(a=new google.maps.Map(document.getElementById(l),{zoom:r||_.zoom,scrollwheel:_.scrollwheel})).setCenter({lat:s,lng:i}),a.setMapTypeId(google.maps.MapTypeId.TERRAIN);else if("street-view"==n)(a=new google.maps.StreetViewPanorama(document.getElementById(l),{zoom:r||_.zoom,scrollwheel:_.scrollwheel})).setPosition({lat:s,lng:i});else if("static"==n)D(document).ready(function(){a=GMaps.staticMapURL({size:[2048,2048],lat:s,lng:i,zoom:r||_.zoom}),D("#"+l).css("background-image","url("+a+")")});else if("custom"==n){var I,W=d.length;for(e=0;e<W;e++){var A=d[e][0],B=d[e][1],G=d[e][2],N=D.extend({},g[e]);""!=A&&(N.featureType=A),""!=B&&(N.elementType=B),N.stylers=G,g.push(N)}if(a=new GMaps({div:"#"+l,lat:s,lng:i,zoom:r||_.zoom,scrollwheel:_.scrollwheel,styles:g}),O&&1!=S&&a.addMarker({lat:s,lng:i,title:c,icon:z}),O&&1==S)for(I=0;I<T.length;I++)a.addMarker({title:T[I][1],lat:T[I][2],lng:T[I][3],icon:T[I][0],infoWindow:{content:_.infoWindowTemplate(T[I][4],T[I][5],T[I][6],T[I][7],T[I][8]),maxWidth:150}})}else a=new GMaps({div:"#"+l,lat:s,lng:i,zoom:r||_.zoom,scrollwheel:_.scrollwheel}),O&&a.addMarker({lat:s,lng:i,title:c,icon:z});if(O&&"satellite"==n||"terrain"==n||"street-view"==n){var J=new google.maps.Marker({position:{lat:s,lng:i},map:a});if(z){var L=new google.maps.MarkerImage(z);J.setIcon(L)}c&&J.setOptions({title:c})}if(1==S&&"terrain"==n){var E,P,R=new google.maps.InfoWindow;for(P=0;P<T.length;P++)E=new google.maps.Marker({position:new google.maps.LatLng(T[P][1],T[P][2]),map:a}),google.maps.event.addListener(E,"click",function(e,t){return function(){R.setContent(T[t][0]),R.open(a,e)}}(E,P))}v||google.maps.event.addDomListener(window,"resize",function(){setTimeout(function(){a.setCenter({lat:s,lng:i})},100)}),p&&D(document).ready(function(){a.drawPolygon({paths:m,strokeColor:u.strokeColor,strokeOpacity:u.strokeOpacity,strokeWeight:u.strokeWeight,fillColor:u.fillColor,fillOpacity:u.fillOpacity})}),f&&D(document).ready(function(){a.drawPolyline({path:h,strokeColor:y.strokeColor,strokeOpacity:y.strokeOpacity,strokeWeight:y.strokeWeight})}),w&&D(document).ready(function(){a.drawRoute({origin:k[0],destination:k[1],travelMode:M.travelMode,strokeColor:M.strokeColor,strokeOpacity:M.strokeOpacity,strokeWeight:M.strokeWeight})}),v&&GMaps.geolocate({success:function(e){a.setCenter({lat:e.coords.latitude,lng:e.coords.longitude}),a.addMarker({lat:e.coords.latitude,lng:e.coords.longitude,title:c,icon:z}),google.maps.event.addDomListener(window,"resize",function(){setTimeout(function(){a.setCenter({lat:e.coords.latitude,lng:e.coords.longitude})},100)})},error:function(e){alert("Geolocation failed: "+e.message)},not_supported:function(){alert("Your browser does not support geolocation")}}),C&&D(document).ready(function(){var e=D(b).closest("form");D(e).submit(function(e){e.preventDefault(),GMaps.geocode({address:D(b).val().trim(),callback:function(e,t){if("OK"==t){var o=e[0].geometry.location;a.setCenter(o.lat(),o.lng()),a.addMarker({lat:o.lat(),lng:o.lng()}),s=o.lat(),i=o.lng()}}})})}),x=x.add(o)})}}}(jQuery);