!function(k,t){"use strict";var i="file:"===k.location.protocol,r=t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1");function o(t){return t.cloneNode(!0)}function e(t,e){u[t]=u[t]||[],u[t].push(e)}function n(t,r){if(void 0!==s[t])s[t]instanceof SVGSVGElement?r(o(s[t])):e(t,r);else{if(!k.XMLHttpRequest)return r("Browser does not support XMLHttpRequest"),!1;s[t]={},e(t,r);var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState){if(404===n.status||null===n.responseXML)return r("Unable to load SVG file: "+t),i&&r("Note: SVG injection ajax calls do not work locally without adjusting security setting in your browser. Or consider using a local webserver."),r(),!1;if(!(200===n.status||i&&0===n.status))return r("There was a problem injecting the SVG: "+n.status+" "+n.statusText),!1;if(n.responseXML instanceof Document)s[t]=n.responseXML.documentElement;else if(DOMParser&&DOMParser instanceof Function){var e;try{e=(new DOMParser).parseFromString(n.responseText,"text/xml")}catch(t){e=void 0}if(!e||e.getElementsByTagName("parsererror").length)return r("Unable to parse SVG file: "+t),!1;s[t]=e.documentElement}!function(e){for(var t=0,r=u[e].length;t<r;t++)!function(t){setTimeout(function(){u[e][t](o(s[e]))},0)}(t)}(t)}},n.open("GET",t),n.overrideMimeType&&n.overrideMimeType("text/xml"),n.send()}}function l(A,w,t,x){var S=A.getAttribute("data-src")||A.getAttribute("src");if(/\.svg/i.test(S))if(r)-1===T.indexOf(A)&&(T.push(A),A.setAttribute("src",""),n(S,function(i){if(void 0===i||"string"==typeof i)return x(i),!1;var t=A.getAttribute("id");t&&i.setAttribute("id",t);var e=A.getAttribute("title");e&&i.setAttribute("title",e);var r=[].concat(i.getAttribute("class")||[],"injected-svg",A.getAttribute("class")||[]).join(" ");i.setAttribute("class",function(t){for(var e={},r=(t=t.split(" ")).length,n=[];r--;)e.hasOwnProperty(t[r])||(e[t[r]]=1,n.unshift(t[r]));return n.join(" ")}(r));var n=A.getAttribute("style");n&&i.setAttribute("style",n);var o=[].filter.call(A.attributes,function(t){return/^data-\w[\w\-]*$/.test(t.name)});j.call(o,function(t){t.name&&t.value&&i.setAttribute(t.name,t.value)});var a,l,s,u,c={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],pattern:["fill","stroke"],radialGradient:["fill","stroke"]};Object.keys(c).forEach(function(t){l=c[t];for(var e=0,r=(a=i.querySelectorAll("defs "+t+"[id]")).length;e<r;e++){var n;s=a[e].id,u=s+"-"+G,j.call(l,function(t){for(var e=0,r=(n=i.querySelectorAll("["+t+'*="'+s+'"]')).length;e<r;e++)n[e].setAttribute(t,"url(#"+u+")")}),a[e].id=u}}),i.removeAttribute("xmlns:a");for(var f,p,d=i.querySelectorAll("script"),v=[],g=0,h=d.length;g<h;g++)(p=d[g].getAttribute("type"))&&"application/ecmascript"!==p&&"application/javascript"!==p||(f=d[g].innerText||d[g].textContent,v.push(f),i.removeChild(d[g]));if(0<v.length&&("always"===w||"once"===w&&!M[S])){for(var m=0,b=v.length;m<b;m++)new Function(v[m])(k);M[S]=!0}var y=i.querySelectorAll("style");j.call(y,function(t){t.textContent+=""}),A.parentNode.replaceChild(i,A),delete T[T.indexOf(A)],A=null,G++,x(i)}));else{var e=A.getAttribute("data-fallback")||A.getAttribute("data-png");e?(A.setAttribute("src",e),x(null)):t?(A.setAttribute("src",t+"/"+S.split("/").pop().replace(".svg",".png")),x(null)):x("This browser does not support SVG and no PNG fallback was defined.")}else x("Attempted to inject a file with a non-svg extension: "+S)}function a(e,t,r){var n=(t=t||{}).evalScripts||"always",i=t.pngFallback||!1,o=t.each;if(void 0!==e.length){var a=0;j.call(e,function(t){l(t,n,i,function(t){o&&"function"==typeof o&&o(t),r&&e.length===++a&&r(a)})})}else e?l(e,n,i,function(t){o&&"function"==typeof o&&o(t),r&&r(1),e=null}):r&&r(0)}var j=Array.prototype.forEach||function(t,e){if(null==this||"function"!=typeof t)throw new TypeError;var r,n=this.length>>>0;for(r=0;r<n;++r)r in this&&t.call(e,this[r],r,this)},s={},G=0,T=[],u=[],M={};"object"==typeof module&&"object"==typeof module.exports?module.exports=exports=a:"function"==typeof define&&define.amd?define(function(){return a}):"object"==typeof k&&(k.SVGInjector=a)}(window,document);