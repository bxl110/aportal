define(["./core","./core/toType","./var/isFunction","./var/rnothtmlwhite"],function(l,p,d,g){"use strict";return l.Callbacks=function(e){var n,r;e="string"==typeof e?(n=e,r={},l.each(n.match(g)||[],function(n,t){r[t]=!0}),r):l.extend({},e);function i(){for(o=o||e.once,c=u=!0;h.length;s=-1)for(t=h.shift();++s<f.length;)!1===f[s].apply(t[0],t[1])&&e.stopOnFalse&&(s=f.length,t=!1);e.memory||(t=!1),u=!1,o&&(f=t?[]:"")}var u,t,c,o,f=[],h=[],s=-1,a={add:function(){return f&&(t&&!u&&(s=f.length-1,h.push(t)),function r(n){l.each(n,function(n,t){d(t)?e.unique&&a.has(t)||f.push(t):t&&t.length&&"string"!==p(t)&&r(t)})}(arguments),t&&!u&&i()),this},remove:function(){return l.each(arguments,function(n,t){for(var r;-1<(r=l.inArray(t,f,r));)f.splice(r,1),r<=s&&s--}),this},has:function(n){return n?-1<l.inArray(n,f):0<f.length},empty:function(){return f=f&&[],this},disable:function(){return o=h=[],f=t="",this},disabled:function(){return!f},lock:function(){return o=h=[],t||u||(f=t=""),this},locked:function(){return!!o},fireWith:function(n,t){return o||(t=[n,(t=t||[]).slice?t.slice():t],h.push(t),u||i()),this},fire:function(){return a.fireWith(this,arguments),this},fired:function(){return!!c}};return a},l});